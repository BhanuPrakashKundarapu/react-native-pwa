{"ast":null,"code":"/*!\n * cookies\n * Copyright(c) 2014 Jed Schmidt, http://jed.is/\n * Copyright(c) 2015-2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\nvar deprecate = require('depd')('cookies');\nvar Keygrip = require('keygrip');\nvar http = require('http');\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * RegExp to match Priority cookie attribute value.\n */\n\nvar PRIORITY_REGEXP = /^(?:low|medium|high)$/i;\n\n/**\n * Cache for generated name regular expressions.\n */\n\nvar REGEXP_CACHE = Object.create(null);\n\n/**\n * RegExp to match all characters to escape in a RegExp.\n */\n\nvar REGEXP_ESCAPE_CHARS_REGEXP = /[\\^$\\\\.*+?()[\\]{}|]/g;\n\n/**\n * RegExp to match basic restricted name characters for loose validation.\n */\n\nvar RESTRICTED_NAME_CHARS_REGEXP = /[;=]/;\n\n/**\n * RegExp to match basic restricted value characters for loose validation.\n */\n\nvar RESTRICTED_VALUE_CHARS_REGEXP = /[;]/;\n\n/**\n * RegExp to match Same-Site cookie attribute value.\n */\n\nvar SAME_SITE_REGEXP = /^(?:lax|none|strict)$/i;\nfunction Cookies(request, response, options) {\n  if (!(this instanceof Cookies)) return new Cookies(request, response, options);\n  this.secure = undefined;\n  this.request = request;\n  this.response = response;\n  if (options) {\n    if (Array.isArray(options)) {\n      // array of key strings\n      deprecate('\"keys\" argument; provide using options {\"keys\": [...]}');\n      this.keys = new Keygrip(options);\n    } else if (options.constructor && options.constructor.name === 'Keygrip') {\n      // any keygrip constructor to allow different versions\n      deprecate('\"keys\" argument; provide using options {\"keys\": keygrip}');\n      this.keys = options;\n    } else {\n      this.keys = Array.isArray(options.keys) ? new Keygrip(options.keys) : options.keys;\n      this.secure = options.secure;\n    }\n  }\n}\nCookies.prototype.get = function (name, opts) {\n  var sigName = name + \".sig\",\n    header,\n    match,\n    value,\n    remote,\n    data,\n    index,\n    signed = opts && opts.signed !== undefined ? opts.signed : !!this.keys;\n  header = this.request.headers[\"cookie\"];\n  if (!header) return;\n  match = header.match(getPattern(name));\n  if (!match) return;\n  value = match[1];\n  if (value[0] === '\"') value = value.slice(1, -1);\n  if (!opts || !signed) return value;\n  remote = this.get(sigName);\n  if (!remote) return;\n  data = name + \"=\" + value;\n  if (!this.keys) throw new Error('.keys required for signed cookies');\n  index = this.keys.index(data, remote);\n  if (index < 0) {\n    this.set(sigName, null, {\n      path: \"/\",\n      signed: false\n    });\n  } else {\n    index && this.set(sigName, this.keys.sign(data), {\n      signed: false\n    });\n    return value;\n  }\n};\nCookies.prototype.set = function (name, value, opts) {\n  var res = this.response,\n    req = this.request,\n    headers = res.getHeader(\"Set-Cookie\") || [],\n    cookie = new Cookie(name, value, opts),\n    signed = opts && opts.signed !== undefined ? opts.signed : !!this.keys;\n  var secure = this.secure === undefined ? req.protocol === 'https' || isRequestEncrypted(req) : Boolean(this.secure);\n  if (typeof headers == \"string\") headers = [headers];\n  if (!secure && opts && opts.secure) {\n    throw new Error('Cannot send secure cookie over unencrypted connection');\n  }\n  cookie.secure = opts && opts.secure !== undefined ? opts.secure : secure;\n  if (opts && \"secureProxy\" in opts) {\n    deprecate('\"secureProxy\" option; use \"secure\" option, provide \"secure\" to constructor if needed');\n    cookie.secure = opts.secureProxy;\n  }\n  pushCookie(headers, cookie);\n  if (opts && signed) {\n    if (!this.keys) throw new Error('.keys required for signed cookies');\n    cookie.value = this.keys.sign(cookie.toString());\n    cookie.name += \".sig\";\n    pushCookie(headers, cookie);\n  }\n  var setHeader = res.set ? http.OutgoingMessage.prototype.setHeader : res.setHeader;\n  setHeader.call(res, 'Set-Cookie', headers);\n  return this;\n};\nfunction Cookie(name, value, attrs) {\n  if (!fieldContentRegExp.test(name) || RESTRICTED_NAME_CHARS_REGEXP.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n  if (value && (!fieldContentRegExp.test(value) || RESTRICTED_VALUE_CHARS_REGEXP.test(value))) {\n    throw new TypeError('argument value is invalid');\n  }\n  this.name = name;\n  this.value = value || \"\";\n  for (var name in attrs) {\n    this[name] = attrs[name];\n  }\n  if (!this.value) {\n    this.expires = new Date(0);\n    this.maxAge = null;\n  }\n  if (this.path && !fieldContentRegExp.test(this.path)) {\n    throw new TypeError('option path is invalid');\n  }\n  if (this.domain && !fieldContentRegExp.test(this.domain)) {\n    throw new TypeError('option domain is invalid');\n  }\n  if (typeof this.maxAge === 'number' ? isNaN(this.maxAge) || !isFinite(this.maxAge) : this.maxAge) {\n    throw new TypeError('option maxAge is invalid');\n  }\n  if (this.priority && !PRIORITY_REGEXP.test(this.priority)) {\n    throw new TypeError('option priority is invalid');\n  }\n  if (this.sameSite && this.sameSite !== true && !SAME_SITE_REGEXP.test(this.sameSite)) {\n    throw new TypeError('option sameSite is invalid');\n  }\n}\nCookie.prototype.path = \"/\";\nCookie.prototype.expires = undefined;\nCookie.prototype.domain = undefined;\nCookie.prototype.httpOnly = true;\nCookie.prototype.partitioned = false;\nCookie.prototype.priority = undefined;\nCookie.prototype.sameSite = false;\nCookie.prototype.secure = false;\nCookie.prototype.overwrite = false;\nCookie.prototype.toString = function () {\n  return this.name + \"=\" + this.value;\n};\nCookie.prototype.toHeader = function () {\n  var header = this.toString();\n  if (this.maxAge) this.expires = new Date(Date.now() + this.maxAge);\n  if (this.path) header += \"; path=\" + this.path;\n  if (this.expires) header += \"; expires=\" + this.expires.toUTCString();\n  if (this.domain) header += \"; domain=\" + this.domain;\n  if (this.priority) header += \"; priority=\" + this.priority.toLowerCase();\n  if (this.sameSite) header += \"; samesite=\" + (this.sameSite === true ? 'strict' : this.sameSite.toLowerCase());\n  if (this.secure) header += \"; secure\";\n  if (this.httpOnly) header += \"; httponly\";\n  if (this.partitioned) header += '; partitioned';\n  return header;\n};\n\n// back-compat so maxage mirrors maxAge\nObject.defineProperty(Cookie.prototype, 'maxage', {\n  configurable: true,\n  enumerable: true,\n  get: function get() {\n    return this.maxAge;\n  },\n  set: function set(val) {\n    return this.maxAge = val;\n  }\n});\ndeprecate.property(Cookie.prototype, 'maxage', '\"maxage\"; use \"maxAge\" instead');\n\n/**\n * Get the pattern to search for a cookie in a string.\n * @param {string} name\n * @private\n */\n\nfunction getPattern(name) {\n  if (!REGEXP_CACHE[name]) {\n    REGEXP_CACHE[name] = new RegExp('(?:^|;) *' + name.replace(REGEXP_ESCAPE_CHARS_REGEXP, '\\\\$&') + '=([^;]*)');\n  }\n  return REGEXP_CACHE[name];\n}\n\n/**\n * Get the encrypted status for a request.\n *\n * @param {object} req\n * @return {string}\n * @private\n */\n\nfunction isRequestEncrypted(req) {\n  return req.socket ? req.socket.encrypted : req.connection.encrypted;\n}\nfunction pushCookie(headers, cookie) {\n  if (cookie.overwrite) {\n    for (var i = headers.length - 1; i >= 0; i--) {\n      if (headers[i].indexOf(cookie.name + '=') === 0) {\n        headers.splice(i, 1);\n      }\n    }\n  }\n  headers.push(cookie.toHeader());\n}\nCookies.connect = Cookies.express = function (keys) {\n  return function (req, res, next) {\n    req.cookies = res.cookies = new Cookies(req, res, {\n      keys: keys\n    });\n    next();\n  };\n};\nCookies.Cookie = Cookie;\nmodule.exports = Cookies;\n;\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n  if (!reactHotLoader) {\n    return;\n  }\n  reactHotLoader.register(deprecate, \"deprecate\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(fieldContentRegExp, \"fieldContentRegExp\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(PRIORITY_REGEXP, \"PRIORITY_REGEXP\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(REGEXP_CACHE, \"REGEXP_CACHE\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(REGEXP_ESCAPE_CHARS_REGEXP, \"REGEXP_ESCAPE_CHARS_REGEXP\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(RESTRICTED_NAME_CHARS_REGEXP, \"RESTRICTED_NAME_CHARS_REGEXP\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(RESTRICTED_VALUE_CHARS_REGEXP, \"RESTRICTED_VALUE_CHARS_REGEXP\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(SAME_SITE_REGEXP, \"SAME_SITE_REGEXP\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(Cookies, \"Cookies\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(Cookie, \"Cookie\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(getPattern, \"getPattern\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(isRequestEncrypted, \"isRequestEncrypted\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n  reactHotLoader.register(pushCookie, \"pushCookie\", \"D:\\\\Vscode\\\\MERNPROJECTS\\\\Pwa reference\\\\react-native-pwa\\\\react-native-pwa\\\\node_modules\\\\cookies\\\\index.js\");\n})();\n;\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}